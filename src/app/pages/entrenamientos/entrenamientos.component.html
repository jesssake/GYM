<div class="training-container">
    <h1>Mis Entrenamientos</h1>

    <!-- Estado de carga -->
    <div *ngIf="isLoading" class="loading-state">
        <p>Cargando rutina...</p>
    </div>

    <!-- Error -->
    <div *ngIf="errorMessage" class="error-state">
        <p class="error-message">ðŸš¨ {{ errorMessage }}</p>
    </div>

    <!-- Contenido principal -->
    <div class="content-wrapper" *ngIf="!isLoading && rutinaDetalle">

        <!-- PANEL IZQUIERDO: Lista de dÃ­as -->
        <div class="routine-list-panel">
            <h2 class="panel-heading">
                DÃ­as de la Rutina ({{ rutinaDetalle.titulo }})
            </h2>
            <p class="detail-info">Selecciona el dÃ­a de tu entrenamiento:</p>

            <!-- Lista de dÃ­as -->
            <div *ngFor="let dia of diasRutina"
                 class="routine-card"
                 [ngClass]="{'active-routine-card': dia === diaSeleccionado}"
                 (click)="seleccionarDia(dia)">
                <h3>{{ dia }}</h3>

                <p>Foco: {{ rutinaDetalle.objetivo }}</p>

                <span class="status-badge status-ok">
                    {{ rutinaDetalle.dias[dia].length }} Ejercicios
                </span>
            </div>
        </div>

        <!-- PANEL DERECHO: Ejercicios del dÃ­a -->
        <div class="routine-detail-panel" *ngIf="diaSeleccionado">
            <h2 class="panel-heading">
                {{ diaSeleccionado }} | {{ rutinaDetalle.titulo }}
            </h2>

            <p class="detail-info">
                Objetivo:
                <strong>{{ rutinaDetalle.objetivo }}</strong>
                Â· Dificultad:
                <strong>{{ rutinaDetalle.dificultad }}</strong>
            </p>

            <!-- LISTA DE EJERCICIOS -->
            <div class="exercise-list">
                <div *ngFor="let ejercicio of ejerciciosDelDia" class="exercise-item">

                    <div class="exercise-info">
                        <h3>{{ ejercicio.orden }}. {{ ejercicio.nombre }}</h3>

                        <p>
                            Series: <strong>{{ ejercicio.series }}</strong>
                            &nbsp; | &nbsp;
                            Reps: <strong>{{ ejercicio.repeticiones }}</strong>
                        </p>

                        <p class="musculo-foco">
                            Descanso: {{ ejercicio.descanso }}
                        </p>
                    </div>

                    <!-- BOTONES -->
                    <div class="exercise-actions">

                        <!-- Video -->
                        <button *ngIf="ejercicio.video_url"
                                class="btn btn-outline"
                                (click)="verVideo(ejercicio.video_url)">
                            <i class="fas fa-video"></i> Video
                        </button>

                        <!-- Marcar completado -->
                        <button class="btn"
                                [ngClass]="{
                                  'btn-primary': !ejercicio.completado,
                                  'btn-secondary-dark': ejercicio.completado
                                }"
                                (click)="marcarEjercicioCompletado(ejercicio)">
                            {{ ejercicio.completado ? 'Hecho' : 'Marcar Hecho' }}
                        </button>

                    </div>

                </div>
            </div>

        </div>

    </div>
</div>
